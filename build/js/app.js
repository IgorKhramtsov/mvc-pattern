$(document).ready(function(){$(".panel-side").on("click",".js-add-side, .js-status-side, .js-moderation-side",function(){let s=$(this).attr("class").split(" "),t=$(".status"),e=$(".add"),a=$(".moderation"),i=$(".js-status-side"),r=$(".js-add-side"),o=$(".js-moderation-side");switch(t.hide(200),e.hide(200),a.hide(200),i.removeClass("active"),r.removeClass("active"),o.removeClass("active"),s[0]){case"js-status-side":t.show(400),i.addClass("active");break;case"js-add-side":e.show(400),r.addClass("active");break;case"js-moderation-side":a.show(400),o.addClass("active")}}),$(".js-form").validate({rules:{price:{number:!0,min:1}},errorPlacement:function(){},submitHandler:function(s,t){!function(s,t){t.preventDefault();let e=$(s);localStorage.clear(),$.ajax({type:e.attr("method"),url:e.attr("action"),data:e.serialize(),success:function(s){!function(s){if("error"===s.status){let t="",e=s.errors;$.each(e,function(s,e){t+=e,$("textarea[name="+s+"]").addClass("error")}),s.description=t}!function(s){let t=s.message,e=s.description,a="error"===s.status,i=$(".notify"),r=i.first().clone();r.appendTo("body"),r.css("z-index",+i.last().css("z-index")+1),r.children(".title").text(t),r.children(".message").text(e),a&&r.addClass("error");r.animate({top:"50px"},"slow"),setTimeout(function(){r.animate({top:"-100px"},"slow"),setTimeout(function(){r.remove()},500)},5e3)}(s)}(s)}})}(s,t)}}),$(".js-table-fix").on("click",function(){$.ajax({url:"/admin_panel/fix_tables",success:function(s){$(".status").html(s)}})}),$(document).on("submit",".js-form-reviews",function(){return!1}),$(document).on("click",".js-publish, .js-delete",function(s){return $this=$(this),$form=$this.closest("form"),$data=$form.serializeArray(),$data.push({name:$this.attr("name"),value:$this.val()}),$.ajax({url:$form.attr("action"),method:"post",data:$data,success:function(s){$(".moderation").html(s)}}),!1}),$(".js-prev").on("click",function(){if($(this).hasClass("disabled"))return;let s=$(".js-current").text();$(".js-pag-form-page").val(s-1),$(".js-pag-form").submit()}),$(".js-next").on("click",function(){if($(this).hasClass("disabled"))return;let s=$(".js-current").text();$(".js-pag-form-page").val(+s+1),$(".js-pag-form").submit()}),$(".js-sort").on("click","li",function(){let s=$(this);$(".js-pag-form-order-by").val(s.data("order-by")),s.children("i").hasClass("fa-sort-up")?$(".js-pag-form-order-type").val("DESC"):$(".js-pag-form-order-type").val("ASC"),$(".js-pag-form").submit()})});